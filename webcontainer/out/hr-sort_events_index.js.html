<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: hr-sort/events/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: hr-sort/events/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Created by wanghongxiang on 2019/2/21.
 */
/**
 * llll
 * @param {sjfo} type 
 * @param {sajdlf} state 
 */
export const sortBtns = (type, state) => {
    let data = state.sortTableData || [];
    let temp = JSON.parse(JSON.stringify(data));
    let before = data.slice(0, state.index);
    let after = data.slice(state.index + 1, data.length);
    let curData = data[state.index];
    let len = data.length;
    let selectedRow = state.selectedRow
    switch (type) {
        case 'add':
            let currentMeta = state.meta || state.metaSource[0]['value']
            if (!currentMeta) {
                return;
            }
            for (let i = 0; i &lt; len; i++) {
                if (data[i].key === currentMeta) {
                    return;
                }
            }
            //fnayi
            let sortFlag = typeof(state.sortType) === 'object' ? true : state.sortType
            // let sortname = sortFlag === true? this.props.json['i6013-000237']: this.props.json['i6013-000238']/* 国际化处理： 升序,降序*/
            let sortname = sortFlag === true? state.json['hrpub-000081']:state.json['hrpub-000082']/* 国际化处理： 升序,降序*/
            let a = {
                key: currentMeta,
                name: transName(currentMeta, state.metaSource),
                sort: sortname
            }
            data.push(a)
            let current = formatSelectData(state.sortTableData, {
                'key': 'field_code', 'name': 'field_name', 'sort': 'ascend_flag'
            }, false,state.json)
            selectedRow = new Array(data.length)
            state.index = data.length -1;
            for (let i = 0, j = selectedRow.length; i &lt; j; i++) {
                if (i === state.index) {
                    selectedRow[i] = true
                } else {
                    selectedRow[i] = false
                }
            }
            return Object.assign({}, state, {
                sortTableData: data,
                sortList: current,
                selectedRow: selectedRow,
                index: data.length -1
            });
            break;
        case 'del':
            data.splice(state.index, 1);
            selectedRow = new Array(data.length)
            state.index = state.index - 1;
            for (let i = 0, j = selectedRow.length; i &lt; j; i++) {
                if (i === state.index) {
                    selectedRow[i] = true
                } else {
                    selectedRow[i] = false
                }
            }
            return Object.assign({},
                state,
                {
                    sortTableData: data,
                    selectedRow: state.selectedRow.splice(state.index, 1),
                    index: data.length -1
                });
            break;
        case 'up':
            if (state.index === -1 || state.index === undefined) {
                return;
            }
            if (data.length > 0 &amp;&amp; state.index != 0) {
                selectedRow = new Array(data.length)
                state.index = state.index - 1
                for (let i = 0, j = selectedRow.length; i &lt; j; i++) {
                    if (i === state.index) {
                        selectedRow[i] = true
                    } else {
                        selectedRow[i] = false
                    }
                }
                let lastBeforeItem = before[before.length - 1];
                before.splice(before.length - 1, 1);
                temp = [...before, curData, lastBeforeItem, ...after];
            }
            return Object.assign({}, state, {
                sortTableData: temp,
                index: state.index,
                selectedRow: selectedRow
            });
            break;
        case 'down':
            if (state.index === -1 || state.index === undefined) {
                return;
            }
            if (data.length > 0 &amp;&amp; state.index != data.length - 1) {
                selectedRow = new Array(data.length)
                state.index = state.index + 1
                for (let i = 0, j = selectedRow.length; i &lt; j; i++) {
                    if (i === state.index) {
                        selectedRow[i] = true
                    } else {
                        selectedRow[i] = false
                    }
                }
                let firstAfterItem = after[0];
                after.splice(0, 1);
                temp = [...before, firstAfterItem, curData, ...after];
            }
            return Object.assign({}, state, {
                sortTableData: temp,
                index: state.index,
                selectedRow: selectedRow
            });
            break;
        case 'clear':
            return Object.assign({}, state, {
                sortTableData: [],
                sortconList: []
            });
            break;
        default:
            return state;
            break;
    }
}
//transName 根据key获得name值
export const transName = (key, origin) => {
    let data = origin ;
    let value;
    data.map(item => {
        if (item.value === key) {
            value = item.key;
        }
    })
    return value;
}

/**
 * 处理对象对应关系
 * @param {hsidaf} origin 
 * @param {sdnakf} obj 
 * @param {jsdfl} flag 
 * @param {sjdof} json 
 */
export const formatSelectData = (origin, obj = {field_code: 'value', field_name: 'key'}, flag = true,json) => {
    let result = []
    if (!Array.isArray(origin)) {
        return
    }
    for (let i = 0, j = origin.length; i &lt; j; i++) {
        let tem = {}
        for (let m in obj) {
            if (!flag) {
                if (m === 'sort') {
                    // tem[obj[m]] = origin[i][m] == this.props.json['i6013-000237'] ? true : false/* 国际化处理： 升序*/
                    tem[obj[m]] = origin[i][m] == '升序' ? true : false/* 国际化处理： 升序*/
                } else {
                    tem[obj[m]] = origin[i][m]
                }
            } else {
                if (obj[m] === 'sort') {
                    // tem[obj[m]] = origin[i][m] == true ? this.props.json['i6013-000237'] : this.props.json['i6013-000238']/* 国际化处理： 升序,降序*/
                    tem[obj[m]] = origin[i][m] == true ? json['hrpub-000081'] || '' : json['hrpub-000082'] || '' /* 国际化处理： 升序,降序*/
                } else {
                    tem[obj[m]] = origin[i][m]
                }
            }

        }
        result.push(tem)
    }
    return result
}
export const metaChange = (meta) => {
    return {meta}
}
export const sortTypeChange = (meta) => {
    return {sortType: meta}
}
export const rowClick = (record, index, indent, state) => {
    let selectedRow = new Array(state.sortTableData.length);
    selectedRow[index] = true;
    state.index = index;
    return {selectedRow}
}
export const confirmBtn = ({sortTableData,json}) => {
    let current = formatSelectData(sortTableData, {
        'key': 'field_code', 'name': 'field_name', 'sort': 'ascend_flag'
    }, false,json)
    return current
}
export const saveBtn = ({sortTableData,json}) => {
    let current = formatSelectData(sortTableData, {
        'key': 'field_code', 'name': 'field_name', 'sort': 'ascend_flag'
    }, false,json)
    return current
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Header.html">Header</a></li><li><a href="orgRefer.html">orgRefer</a></li><li><a href="Pagination.html">Pagination</a></li></ul><h3>Global</h3><ul><li><a href="global.html#allCheckTable">allCheckTable</a></li><li><a href="global.html#data">data</a></li><li><a href="global.html#formatSelectData">formatSelectData</a></li><li><a href="global.html#sortBtns">sortBtns</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Mar 21 2019 16:34:25 GMT+0800 (GMT+08:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
